let allFiles={};function init(a="dropzone",b=-1){$(document).ready(function(){}).on("click",`.${a}`,function(){$(`#${$(this).data("target")}`).trigger("click")}).on("change",'input[type="file"]',function(){let c=$(this);if(c.hasClass(`${a}-on`)){let g=c.prop("files"),d=c.attr("id"),e=$(`[data-target="${d}"].${a}`);for(let f=0;f<g.length&&(-1===b||e.find(".file").length<b);f++){let h=g.item(f);e.append(newFile(d,h)),allFiles[d].push(h),insertFilesToInput(e)}}}).on("dragover",`.${a}`,function(b){b.preventDefault(),b.stopPropagation(),$(this).addClass(`${a}-hover`)}).on("dragleave",`.${a}`,function(b){b.preventDefault(),b.stopPropagation(),$(this).removeClass(`${a}-hover`)}).on("drop",`.${a}`,function(c){c.preventDefault(),c.stopPropagation(),$(this).removeClass(`${a}-hover`);let d=$(this).data("target");(-1===b||$(this).find(".file").length<b)&&($(this).append(newFile(d,...c.originalEvent.dataTransfer.files)),allFiles[d].push(...c.originalEvent.dataTransfer.files),insertFilesToInput($(this)))}).on("click",`.${a} > .file`,function(a){a.preventDefault(),a.stopPropagation();let c=$(this).attr("id").split("-")[2],b=$(this).parent(),d=b.data("target");$(this).remove(),allFiles[d][c]=null,insertFilesToInput($(b))})}function newFile(a,...b){a in allFiles||(allFiles[a]=[]);let d=allFiles[a].length,c="";return b.forEach(function(a){let b=a.name,e=(a.size/1048576).toFixed(2);c+=`<div class="file" id="file-id-${d}" title="${b}"><div class="name">${b}</div><div class="size">${e} MB</div></div>`,d++}),c}function insertFilesToInput(a){let b=new DataTransfer,c=a.data("target");a.find(".file").each(function(d,a){b.items.add(allFiles[c][$(a).attr("id").split("-")[2]])}),$(`#${c}`).prop("files",b.files),a.find(".file").length?a.find(".placeholder").addClass("d-none"):a.find(".placeholder").removeClass("d-none")}export{init as initDropzones}